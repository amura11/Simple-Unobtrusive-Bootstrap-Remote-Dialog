!function(t){t.fn.serializeFormJSON=function(){var i={},o=this.serializeArray();return t.each(o,function(){i[this.name]?(i[this.name].push||(i[this.name]=[i[this.name]]),i[this.name].push(this.value||"")):i[this.name]=this.value||""}),i}}(jQuery),function(t,i,o){function n(){var o=i(U);0===o.length&&(o=i(t.modalTemplate).appendTo(document.body)),o.modal({backdrop:"static",keyboard:!1,show:!1})}function a(){i("body").on("click",'[data-toggle="remote-dialog"]',function(o){var n=i(o.target);t.Show({identifier:n.attr("data-identifier"),url:n.attr("data-url")})}),i("body").on("click",U+" .modal-footer button",d),i("body").on("shown.bs.modal",U,D.bind(null,"shown")),i("body").on("hidden.bs.modal",U,D.bind(null,"hidden"))}function e(o){var n=i(U),a=n.find(".modal-content"),e=i.extend(t.defaults,o);if(!e.url||!e.identifier)throw"Url and Identifier must be specified";n.attr("data-identifier",e.identifier),a.attr("id",e.identifier),t.handlers.load(e.url)}function r(){var t=i(U),o=t.find(".modal-content");o.empty(),o.removeAttr("id"),t.modal("hide")}function d(t){var o=i(U),n=b(i(t.target));n.confirm?f(n,o):n.confirmAccept?l(n,o):n.confirmCancel?s(n,o):n.submit?m(n,o):n.reload&&c(n,o)}function s(t,i){D("confirm-cancel"),u(t,i)}function l(t,i){D("confirm-accept"),t.autoDismiss||u(t,i),t.submit?h(t,i):t.autoDismiss&&r()}function m(t,i){h(t,i)}function c(i,o){t.handlers.load(options.reloadUrl)}function u(t,i){var o=i.find(".modal-body"),n=i.find(".modal-footer");o.find("#confirmation-container").remove(),n.find("#confirmation-buttons").remove(),o.find("*").show(),n.find("*").show()}function f(o,n){var a=n.find(".modal-body"),e=n.find(".modal-footer"),r=a.innerHeight(),d=a.find("#confirmation-message"),s=e.find("#confirmation-buttons");0===d.length&&(a.find("*").hide(),d=i(t.confirmMessageTemplate).prependTo(a),a.css({"min-height":r+"px"})),0===s.length&&(e.find("*").hide(),s=i(t.confirmButtonsTemplate).appendTo(e)),d.find("#confirmation-message").html(o.confirmMessage),s.find("button[data-confirm-cancel]").html(o.confirmCancelText),s.find("button[data-confirm-accept]").html(o.confirmAcceptText),(o.submit||o.reload)&&s.find("button[data-confirm-accept]").data("submitUrl",o.submitUrl).data("reloadUrl",o.reloadUrl),s.find("button[data-confirm-accept]").data("autoDismiss",o.autoDismiss)}function h(i,n){var a=n.find(".modal-body form"),e=a.length>0?a.serializeFormJSON():o;t.handlers.submit(e,i)}function b(t){var i=t.data();return i.confirm=(i.confirm===o?!0:i.confirm)&&i.confirmMessage!==o,i.reload=(i.reload===o?!0:i.reload)&&i.reloadUrl!==o,i.submit=(i.submit===o?!0:i.submit)&&i.submitUrl!==o,i.autoDismiss=i.autoDismiss===o?!1:i.autoDismiss,i}function p(o){i.ajax({type:"GET",url:o,success:t.handlers.loadSuccess,error:t.handlers.loadError})}function v(t){var o=i(U),n=o.find(".modal-content");n.html(t),D("loaded"),i(U).modal("show")}function g(t,i,o){D("load-error",[xhr,ajaxOptions,thrownError])}function w(o,n){i.ajax({url:n.submitUrl,data:o,method:"POST",success:t.handlers.submitSuccess,error:t.handlers.submitError,reload:n.reload,reloadUrl:n.reloadUrl,autoDismiss:n.autoDismiss})}function y(o){var n=i(U),a=this;D("submit"),a.reload?t.handlers.load(a.reloadUrl):a.autoDismiss&&n.modal("hide")}function T(t,i,o){D("submit_error",[xhr,ajaxOptions,thrownError])}function D(t,o){var n=i(U),a=n.find(".modal-content");n.attr("data-identifier");a.trigger(t+".dialog")}var U="#remote-dialog-modal";t.handlers={load:p,loadSuccess:v,loadError:g,submit:w,submitSuccess:y,submitError:T},t.defaults={identifier:null,url:null},t.Show=e,t.Hide=r,t.modalTemplate='        <div id="remote-dialog-modal" class="modal fade">             <div class="modal-dialog">                 <div class="modal-content">                 </div>             </div> 		</div> ',t.confirmMessageTemplate='    <div id="confirmation-container">         	<div class="alert alert-warning" role="alert">         		<p id="confirmation-message"></p>             </div>         </div> ',t.confirmButtonsTemplate='    <div id="confirmation-buttons">     	<button type="button" class="btn" data-confirm-accept="true"></button>         <button type="button" class="btn btn-danger" data-confirm-cancel="true"></button>     </div> ',i(function(){n(),a()})}(window.RemoteDialog=window.RemoteDialog||{},jQuery);